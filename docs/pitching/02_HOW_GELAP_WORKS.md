# How Gelap Works

## One-Slide Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              GELAP PROTOCOL                                  â”‚
â”‚                    Privacy-Preserving Token Transactions                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  USER   â”‚         â”‚  SHIELDED POOL  â”‚         â”‚  USER   â”‚               â”‚
â”‚   â”‚  ALICE  â”‚         â”‚   (On-Chain)    â”‚         â”‚   BOB   â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚
â”‚        â”‚                       â”‚                       â”‚                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                  â”‚                  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”               â”‚
â”‚   â”‚ DEPOSIT â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ DEPOSIT â”‚               â”‚
â”‚   â”‚ 100 ETH â”‚    Commitment   â”‚   Commitment    â”‚ 50 ETH  â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    (Hidden)     â”‚   (Hidden)      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚        â”‚                      â”‚                       â”‚                     â”‚
â”‚        â–¼                      â–¼                       â–¼                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚                     MERKLE TREE STATE                       â”‚          â”‚
â”‚   â”‚   [C1] [C2] [C3] [C4] [C5] ... [Cn]                        â”‚          â”‚
â”‚   â”‚     â””â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”˜                                    â”‚          â”‚
â”‚   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜ â”€â”€â–º ROOT                         â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚        â”‚                                                  â”‚                 â”‚
â”‚        â–¼                                                  â–¼                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ZK PROOF    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ZK PROOF    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚ TRANSACT â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ VERIFIED â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ WITHDRAW â”‚     â”‚
â”‚   â”‚ (Private)â”‚   No Data      â”‚ ON-CHAIN â”‚   Amount+Recv  â”‚ (Public) â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   Revealed     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   Revealed     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” PRIVACY: Amount & parties hidden  â”‚  âš¡ SECURITY: ZK-verified on-chain  â”‚
â”‚  ğŸŒ UNIVERSAL: Any ERC-20 token       â”‚  ğŸ”— COMPOSABLE: Multi-chain ready   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Three Core Operations

### 1ï¸âƒ£ DEPOSIT (Shield)
```
Public Wallet â”€â”€â–º Gelap Pool
   100 USDC         Commitment = Hash(USDC, 100, owner, random)
                    â†“
                    Merkle Tree Updated
```
**Result**: Tokens are now private. Only owner knows the balance.

---

### 2ï¸âƒ£ TRANSACT (Private Transfer)
```
Alice's Note â”€â”€â–º SP1 Prover â”€â”€â–º New Notes
(100 USDC)         â”‚              â”œâ”€â–º Bob (30 USDC)
                   â”‚              â””â”€â–º Alice Change (70 USDC)
                   â–¼
              ZK Proof
                   â”‚
              On-Chain Verification
                   â”‚
              âœ… State Updated (No Data Leaked)
```
**Result**: Transfer happens. No one knows sender, receiver, or amount.

---

### 3ï¸âƒ£ WITHDRAW (Unshield)
```
Gelap Pool â”€â”€â–º Public Wallet
Commitment        50 USDC to 0xABC...
    â”‚
    â–¼
ZK Proof (includes receiver address)
    â”‚
    â–¼
Verified â†’ Tokens Transferred
```
**Result**: Tokens back to public. Receiver & amount visible on-chain.

---

## Privacy Guarantees

| What | Status | Notes |
|------|--------|-------|
| Transaction Amount | âœ… Hidden | Except on withdraw |
| Sender Address | âœ… Hidden | Always |
| Receiver Address | âœ… Hidden | Except on withdraw |
| Transaction History | âœ… Hidden | Cannot link txs |
| Token Type | âœ… Hidden | Inside pool |
| Total Pool Value | âŒ Public | Sum of deposits |

---

## Key Innovation: SP1 zkVM

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Traditional ZK     vs     Gelap/SP1  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Write circuits              Write Rustâ”‚
â”‚  Hard to audit               Easy auditâ”‚
â”‚  Limited logic               Any logic â”‚
â”‚  Months to build             Days      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SP1 allows writing ZK proofs in Rust** â€” making privacy accessible to all developers.

---

## ğŸš€ Live on Mantle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          DEPLOYED ON MANTLE            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… Low gas fees (~$0.01 per tx)       â”‚
â”‚  âœ… EVM compatible                     â”‚
â”‚  âœ… Fast finality                      â”‚
â”‚  âœ… SP1 Verifier ready                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
